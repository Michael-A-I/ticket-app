/*! For license information please see 779.a476f25c.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[779],{7307:function(e,t,a){var n=a(2791),r=a(8329),s=a(184);t.Z=function(e){var t=(0,n.useContext)(r.Z);return(0,s.jsx)("img",{src:"".concat(t.user.avatar),alt:"avatar",className:"img-thumbnail mt-2",style:{height:"".concat(e.height),width:"".concat(e.width)}})}},9779:function(e,t,a){a.r(t);var n=a(4165),r=a(5861),s=a(885),i=a(2791),c=a(7865),o=a(7022),l=a(9743),u=a(2677),h=a(6694),f=a(3360),p=a(5212),d=a(1801),g=a(8329),v=a(3204),x=a(7307),m=a(184);t.default=function(){var e=(0,i.useContext)(g.Z),t=(0,i.useContext)(v.Z),a=(0,i.useState)({avatar:!1,gravatar:!0}),Z=(0,s.Z)(a,2),j=Z[0],y=Z[1],k=(0,i.useState)(),w=(0,s.Z)(k,2),b=w[0],S=w[1],C=(0,i.useState)("/upload.png"),A=(0,s.Z)(C,2),N=A[0],D=A[1],R=(0,i.useState)(),T=(0,s.Z)(R,2),F=T[0],I=T[1],U=e.user.token;(0,i.useEffect)((function(){E()}),[]);var E=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/user",{method:"GET",headers:{"Content-Type":"application/json","x-access-token":U}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,console.log(a),y({avatar:a.upload,gravatar:!a.upload}),D(a.image),console.log(a.image),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),L=function(e){y({avatar:!j.avatar,gravatar:!j.gravatar})},P=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(a){var r,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleSubmit"),a.preventDefault(),r=a.target[0].checked,s={upload:r,image:F},e.prev=4,e.next=7,fetch("/profile/edit",{method:"PUT",headers:{"Content-Type":"application/json","x-access-token":U},body:JSON.stringify(s)});case 7:e.sent,r?F?(localStorage.setItem("avatar",F),t({type:"setAvatar",value:F})):(localStorage.setItem("avatar",N),t({type:"setAvatar",value:N})):(localStorage.setItem("avatar","/default-profile.jpg"),t({type:"setAvatar",value:"/default-profile.jpg"})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(c.Z,{}),(0,m.jsx)(p.Z,{children:(0,m.jsxs)(o.Z,{children:[(0,m.jsx)(l.Z,{children:(0,m.jsx)("p",{children:"Choose an existing avatar, or drag and drop a photo from your computer."})}),(0,m.jsx)(x.Z,{width:"250px",height:"200px"}),(0,m.jsxs)(l.Z,{children:[(0,m.jsx)(u.Z,{children:b?(0,m.jsx)(d.Z,{file:b}):(0,m.jsx)("img",{src:"".concat(N),className:"img-thumbnail mt-2",style:{height:"152px",width:"200px",background:"white"}})}),(0,m.jsx)(u.Z,{children:(0,m.jsx)("img",{src:"/default-profile.jpg",className:"img-thumbnail mt-2",style:{height:"152px",width:"200px"}})})]}),(0,m.jsx)(l.Z,{children:(0,m.jsxs)(h.Z,{onSubmit:function(e){return P(e)},children:[(0,m.jsx)(h.Z.Check,{type:"switch",label:"Avatar",checked:j.avatar,onChange:function(){return L()}}),(0,m.jsx)(h.Z.Check,{type:"switch",label:"Defaul Profile",checked:j.gravatar,onChange:function(){return L()}}),(0,m.jsx)("input",{id:"file",name:"file",type:"file",onChange:function(e){var t=new FileReader;t.onload=function(){2===t.readyState&&I(t.result)},t.readAsDataURL(e.target.files[0]),S(e.target.files[0])},className:"form-control"}),(0,m.jsx)(f.Z,{type:"submit",children:"Submit"})]})})]})})]})}},1801:function(e,t,a){var n=a(885),r=a(2791),s=a(184);t.Z=function(e){var t=(0,r.useState)(!0),a=(0,n.Z)(t,2),i=a[0],c=a[1],o=(0,r.useState)(""),l=(0,n.Z)(o,2),u=l[0],h=l[1];for(!function(){if(e.file){console.log("fileSetup:"+e.file);var t=new FileReader;t.onloadend=function(){c(!1),h(t.result)},t.readAsDataURL(e.file)}}();!e.file;)return null;return i?(0,s.jsx)("p",{children:"loading..."}):(0,s.jsx)("img",{src:u,className:"img-thumbnail mt-2",height:200,width:200})}}}]);
//# sourceMappingURL=779.a476f25c.chunk.js.map