/*! For license information please see 712.f0991bca.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[712],{2586:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var l=n(4165),a=n(5861),r=n(885),i=n(6871),s=n(2791),o=n(7865),c=n(5212),d=n(2062),u=n.n(d),p=n(5705),h=n(7712),f=n(6694),m=n(3360),x=n(8329),g=n(1801),v=n(184);var j=function(e){(0,i.s0)();var t=(0,i.TH)(),n=(0,s.useState)(),d=(0,r.Z)(n,2),j=d[0],Z=d[1];console.log(e);var b=(0,s.useContext)(x.Z);function y(){u()({text:"New Post",icon:"success",buttons:!1,timer:1500})}function C(){return(C=(0,a.Z)((0,l.Z)().mark((function e(t){var n,a,r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,console.log(JSON.stringify(t)),e.prev=2,e.next=5,fetch("/posts/new",{method:"POST",headers:{"x-access-token":b.user.token,"Content-type":"application/json"},body:JSON.stringify(n)});case 5:return a=e.sent,e.next=8,a.json();case 8:return r=e.sent,console.log(r),e.abrupt("return",y());case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}var S=h.Ry().shape({category:h.Z_(),title:h.Z_().required("Please set a title!"),description:h.Z_().required("Please set a description!"),file:h.nK()}),N=["General","Engineer","Product","Support"];console.log(t);var w=localStorage.getItem("handleOptions");"Dashboard"==w&&(w="General");var k=N.filter((function(e){return e!=w}));return console.log(k),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(o.Z,{}),(0,v.jsx)(c.Z,{title:"create post",children:(0,v.jsx)("div",{id:"bootstrap-overrides",children:(0,v.jsx)("div",{className:"create-post--center",children:(0,v.jsx)(p.J9,{validationSchema:S,onSubmit:function(e){return C.apply(this,arguments)},validateOnBlur:!1,validateOnChange:!1,initialValues:{category:w,title:"",description:"",file:null},children:function(e){var t=e.handleSubmit,n=e.handleChange,l=e.values,a=e.touched,r=e.errors,i=e.setFieldValue;return(0,v.jsxs)(f.Z,{onSubmit:t,encType:"multipart/form-data",children:[console.log(l),(0,v.jsxs)("div",{className:"dropdown-formgroup",children:[(0,v.jsx)("h1",{children:"Ask question in "}),(0,v.jsx)(f.Z.Group,{children:(0,v.jsxs)(f.Z.Select,{className:"select-form","aria-label":"Default select example",value:l.category,onChange:n,name:"category",children:[(0,v.jsxs)("option",{children:[" ",w]}),k.map((function(e){return(0,v.jsx)("option",{label:"".concat(e),value:"".concat(e),onChange:n,children:e},e)}))]})})]}),(0,v.jsxs)(f.Z.Group,{className:"mb-3 ",children:[console.log(N),(0,v.jsx)(f.Z.Label,{children:"Title"}),(0,v.jsx)(f.Z.Control,{control:"input",size:"lg",type:"text",name:"title",placeholder:"Post Title",value:l.title,onChange:n,isValid:a.lastName&&!r.lastName,isInvalid:!!r.title}),(0,v.jsx)(f.Z.Control.Feedback,{type:"invalid",children:r.title})]}),(0,v.jsxs)(f.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[(0,v.jsx)(f.Z.Label,{children:"Description"}),(0,v.jsx)(f.Z.Control,{as:"textarea",name:"description",rows:6,placeholder:"description",value:l.description,onChange:n,isValid:a.lastName&&!r.lastName,isInvalid:!!r.description}),(0,v.jsx)(f.Z.Control.Feedback,{type:"invalid",children:r.description})]}),(0,v.jsxs)(f.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[(0,v.jsx)(f.Z.Label,{children:"File Upload"}),(0,v.jsx)("input",{id:"file",name:"file",type:"file",onChange:function(e){var t=new FileReader;t.onload=function(){2===t.readyState&&i("file",t.result)},t.readAsDataURL(e.target.files[0]),Z(e.target.files[0])},className:"form-control"}),(0,v.jsx)(g.Z,{file:j})]}),(0,v.jsx)(m.Z,{type:"submit",children:"Sumbit"})]})}})})})})]})}},1801:function(e,t,n){var l=n(885),a=n(2791),r=n(184);t.Z=function(e){var t=(0,a.useState)(!0),n=(0,l.Z)(t,2),i=n[0],s=n[1],o=(0,a.useState)(""),c=(0,l.Z)(o,2),d=c[0],u=c[1];for(!function(){if(e.file){console.log("fileSetup:"+e.file);var t=new FileReader;t.onloadend=function(){s(!1),u(t.result)},t.readAsDataURL(e.file)}}();!e.file;)return null;return i?(0,r.jsx)("p",{children:"loading..."}):(0,r.jsx)("img",{src:d,className:"img-thumbnail mt-2",height:200,width:200})}}}]);
//# sourceMappingURL=712.f0991bca.chunk.js.map